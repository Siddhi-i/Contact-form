<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact Form</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
    :root {
        --bg-start: #0a2540;
        --bg-end: #0e7490;
        --card-bg: rgba(255,255,255,0.22);
        --card-border: rgba(255,255,255,0.35);
        --text: #ffffff;
        --muted: rgba(255,255,255,0.9);
        --input-bg: #ffffff;
        --input-text: #0f172a;
        --accent-start: #2563eb;
        --accent-end: #0ea5e9;
        --success: #16a34a;
        --error: #dc2626;
    }
    body { min-height: 100vh; display: flex; justify-content: center; align-items: center; background: linear-gradient(135deg, var(--bg-start), var(--bg-end)); color: var(--text); padding: 24px; }
    .dark {
        --bg-start: #0b1324;
        --bg-end: #14203b;
        --card-bg: rgba(16, 20, 32, 0.75);
        --card-border: rgba(99,102,241,0.25);
        --text: #e5e7eb;
        --muted: #94a3b8;
        --input-bg: rgba(10,12,18,0.8);
        --input-text: #e5e7eb;
        --accent-start: #22d3ee;
        --accent-end: #38bdf8;
    }
    .form-container { background: var(--card-bg); backdrop-filter: blur(18px); border: 1px solid var(--card-border); padding: 34px; width: 480px; border-radius: 18px; box-shadow: 0 22px 54px rgba(0,0,0,0.38); }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    h2 { font-weight: 700; letter-spacing: 0.2px; font-size: 24px; }
    .theme-toggle { border: 1px solid var(--card-border); background: var(--card-bg); color: #fff; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: 700; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 24px rgba(0,0,0,0.25); }
    .input-group { margin-bottom: 18px; }
    label { display: block; font-size: 13.5px; color: var(--muted); margin-bottom: 8px; font-weight: 500; }
    input, textarea, select {
        width: 100%; padding: 14px 16px; border-radius: 12px; border: 1px solid rgba(2,6,23,0.06); background: var(--input-bg); color: var(--input-text); font-size: 15px; transition: transform 0.15s, box-shadow 0.15s, border-color 0.15s;
    }
    input::placeholder, textarea::placeholder { color: #94a3b8; }
    input:focus, textarea:focus, select:focus { outline: none; transform: translateY(-1px); border-color: var(--accent-start); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.18); }
    textarea { resize: vertical; }
    .counter { text-align: right; font-size: 12px; color: var(--muted); margin-top: 6px; }
    .error { color: var(--error); font-size: 12.5px; margin-top: 6px; min-height: 16px; }
    .success { text-align: center; margin-top: 12px; color: var(--success); font-weight: 600; min-height: 20px; }
    .actions { margin-top: 8px; }
    .submit-btn {
        width: 100%; padding: 12px; border: none; border-radius: 12px; background: linear-gradient(90deg, var(--accent-start), var(--accent-end)); color: #fff; font-weight: 700; cursor: pointer; transition: transform 0.2s, filter 0.2s, box-shadow 0.2s;
    }
    .submit-btn:hover { transform: translateY(-1px); filter: brightness(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.25); }
    .submit-btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .toast { position: fixed; top: 18px; left: 50%; transform: translateX(-50%); background: var(--card-bg); border: 1px solid var(--card-border); color: var(--text); padding: 12px 16px; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.35); opacity: 0; pointer-events: none; transition: opacity 0.2s, transform 0.2s; }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
    .toast.success { border-color: var(--success); }
    .toast.error { border-color: var(--error); }
    @media (max-width: 520px) { .form-container { width: 100%; } }

</style>
</head>

<body>
<div class="form-container">
    <div class="header">
        <h2>Contact Me</h2>
        <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme" title="Toggle theme">üåô</button>
    </div>

    <form id="contactForm">
        <div class="input-group">
            <label for="name">Name</label>
            <input type="text" id="name" placeholder="Enter your name" autocomplete="name">
            <div class="error" id="nameError" aria-live="polite"></div>
        </div>

        <div class="input-group">
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="Enter your email" autocomplete="email">
            <div class="error" id="emailError" aria-live="polite"></div>
        </div>

        <div class="input-group">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" placeholder="Enter your phone" autocomplete="tel">
            <div class="error" id="phoneError" aria-live="polite"></div>
        </div>

        <div class="input-group">
            <label for="subject">Subject</label>
            <select id="subject">
                <option value="">Select a subject</option>
                <option>General Inquiry</option>
                <option>Support</option>
                <option>Feedback</option>
            </select>
            <div class="error" id="subjectError" aria-live="polite"></div>
        </div>

        <div class="input-group">
            <label for="message">Message</label>
            <textarea id="message" rows="5" placeholder="Write your message" maxlength="500"></textarea>
            <div class="counter" id="messageCounter">0 / 500</div>
            <div class="error" id="messageError" aria-live="polite"></div>
        </div>

        <div class="input-group">
            <label for="attachment">Attachment</label>
            <input type="file" id="attachment" accept=".png,.jpg,.jpeg,.pdf">
            <div class="error" id="attachmentError" aria-live="polite"></div>
        </div>

        <div class="actions">
            <button id="submitBtn" class="submit-btn" type="submit" disabled>Send Message</button>
        </div>
        <div class="success" id="successMessage" aria-live="polite"></div>

    </form>
</div>
<div id="toast" class="toast" role="status" aria-live="polite"></div>


<script>
const form = document.getElementById("contactForm");
const nameEl = document.getElementById("name");
const emailEl = document.getElementById("email");
const phoneEl = document.getElementById("phone");
const subjectEl = document.getElementById("subject");
const messageEl = document.getElementById("message");
const attachmentEl = document.getElementById("attachment");
const submitBtn = document.getElementById("submitBtn");
const nameError = document.getElementById("nameError");
const emailError = document.getElementById("emailError");
const phoneError = document.getElementById("phoneError");
const subjectError = document.getElementById("subjectError");
const messageError = document.getElementById("messageError");
const attachmentError = document.getElementById("attachmentError");
const successMessage = document.getElementById("successMessage");
const counter = document.getElementById("messageCounter");
const toast = document.getElementById("toast");
const themeToggle = document.getElementById("themeToggle");
const LS_KEY = "contactFormDraft";

function showToast(text, type) {
    toast.textContent = text;
    toast.className = "toast " + type + " show";
    setTimeout(() => { toast.className = "toast " + type; }, 2000);
}

function validateName() {
    const v = nameEl.value.trim();
    if (!v) { nameError.textContent = "Please enter your name"; return false; }
    nameError.textContent = "";
    return true;
}

function validateEmail() {
    const v = emailEl.value.trim();
    const pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!v) { emailError.textContent = "Please enter your email"; return false; }
    if (!pattern.test(v)) { emailError.textContent = "Enter a valid email address"; return false; }
    emailError.textContent = "";
    return true;
}

function validatePhone() {
    const v = phoneEl.value.trim();
    if (!v) { phoneError.textContent = ""; return true; }
    const pattern = /^\+?[0-9\s\-()]{7,}$/;
    if (!pattern.test(v)) { phoneError.textContent = "Enter a valid phone number"; return false; }
    phoneError.textContent = "";
    return true;
}

function validateSubject() {
    const v = subjectEl.value.trim();
    if (!v) { subjectError.textContent = "Please select a subject"; return false; }
    subjectError.textContent = "";
    return true;
}

function validateMessage() {
    const v = messageEl.value.trim();
    if (!v) { messageError.textContent = "Please enter your message"; return false; }
    messageError.textContent = "";
    return true;
}

function validateAttachment() {
    attachmentError.textContent = "";
    const f = attachmentEl.files[0];
    if (!f) return true;
    const ok = ["image/png","image/jpeg","application/pdf"].includes(f.type);
    if (!ok) { attachmentError.textContent = "Only PNG, JPG or PDF"; return false; }
    const max = 3 * 1024 * 1024;
    if (f.size > max) { attachmentError.textContent = "Max file size 3MB"; return false; }
    return true;
}

function updateCounter() {
    counter.textContent = messageEl.value.length + " / 500";
}

function updateFormValidity() {
    const valid =
        validateName() &&
        validateEmail() &&
        validatePhone() &&
        validateSubject() &&
        validateMessage() &&
        validateAttachment();
    submitBtn.disabled = !valid;
    return valid;
}

function saveDraft() {
    const data = {
        name: nameEl.value,
        email: emailEl.value,
        phone: phoneEl.value,
        subject: subjectEl.value,
        message: messageEl.value
    };
    localStorage.setItem(LS_KEY, JSON.stringify(data));
}

function restoreDraft() {
    try {
        const raw = localStorage.getItem(LS_KEY);
        if (!raw) return;
        const d = JSON.parse(raw);
        if (d.name) nameEl.value = d.name;
        if (d.email) emailEl.value = d.email;
        if (d.phone) phoneEl.value = d.phone;
        if (d.subject) subjectEl.value = d.subject;
        if (d.message) messageEl.value = d.message;
        updateCounter();
    } catch {}
}

form.addEventListener("input", () => {
    updateCounter();
    updateFormValidity();
    saveDraft();
});

form.addEventListener("submit", (e) => {
    e.preventDefault();
    successMessage.textContent = "";
    if (!updateFormValidity()) return;
    submitBtn.disabled = true;
    submitBtn.textContent = "Sending...";
    setTimeout(() => {
        showToast("Message sent successfully", "success");
        successMessage.textContent = "Message sent successfully!";
        form.reset();
        updateCounter();
        localStorage.removeItem(LS_KEY);
        submitBtn.textContent = "Send Message";
        submitBtn.disabled = true;
    }, 1200);
});

messageEl.addEventListener("input", updateCounter);
updateCounter();
restoreDraft();
updateFormValidity();

function applyThemeFromStorage() {
    const t = localStorage.getItem("theme") || "light";
    if (t === "dark") document.body.classList.add("dark"); else document.body.classList.remove("dark");
}
applyThemeFromStorage();
themeToggle.addEventListener("click", () => {
    const isDark = document.body.classList.toggle("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
});
function updateToggleIcon() {
    const isDark = document.body.classList.contains("dark");
    themeToggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
}
updateToggleIcon();
themeToggle.addEventListener("click", updateToggleIcon);
</script>

</body>
</html>
